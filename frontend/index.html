<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akıllı İçerik Platformu | b!g</title>
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
</head>
<body>
    <header>
        <h1>Akıllı İçerik Platformu 🧠</h1>
        <p>Created by **b!g**</p>
    </header>

    <main>
        <section id="auth-section">
            <h2>🔐 Erişim Kodu (Token)</h2>
            <p>Devam etmek için size verilen yetkilendirme kodunu girin.</p>
            <input type="text" id="api-token" placeholder="X-API-TOKEN Kodu (Örn: SUPER_USER_CODE_b!g)">
            <button onclick="checkToken()">Giriş Yap / Doğrula</button>
            <p id="auth-status" class="status-message"></p>
            <hr>
            <details>
                <summary>Yeni Kullanıcı Kaydı</summary>
                <form id="register-form">
                    <input type="text" id="reg-id" placeholder="Kullanıcı ID (Örn: yeni_kullanici)" required>
                    <input type="email" id="reg-email" placeholder="E-posta" required>
                    <input type="password" id="reg-password" placeholder="Şifre" required>
                    <button type="submit">Kayıt Ol</button>
                    <p id="register-status" class="status-message"></p>
                </form>
            </details>
        </section>

        <section id="analysis-section" class="hidden">
            <h2>📚 İçerik Yükle & Analiz Et</h2>
            <p>Ses, PDF, Word, Görsel dosyası yükleyin veya bir YouTube linki girin.</p>

            <div class="input-group">
                <input type="file" id="file-input" accept=".mp3, .wav, .m4a, .pdf, .docx, .pptx, .jpg, .jpeg, .png">
            </div>

            <div class="or-separator">VEYA</div>

            <div class="input-group">
                <input type="url" id="youtube-url-input" placeholder="YouTube Video URL'si">
            </div>
            
            <button id="analyze-button" onclick="startAnalysis()">Analizi Başlat</button>

            <div id="progress-container" class="hidden">
                <div id="progress-bar"></div>
                <p id="progress-text">Durum: Bekleniyor...</p>
            </div>
        </section>

        <section id="report-section" class="hidden">
            <h2>✅ Analiz Raporu</h2>
            <div class="report-header">
                <p>Raporunuz kaydedildi: <a id="report-link" href="#" target="_blank">Dosyayı Görüntüle / İndir</a></p>
            </div>
            <div id="report-content" class="markdown-body">
                </div>
            <button onclick="window.print()">Sayfayı Yazdır (PDF Olarak Kaydet)</button>
        </section>
    </main>
    <footer>
        <p>© 2025 Akıllı İçerik Platformu. Tüm hakları saklıdır.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>